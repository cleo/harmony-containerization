# Test configuration with persistent storage enabled

global:
  namespace: harmony

harmonyInit:
  image:
    name: harmony
    repository: cleodev/harmony
    tag: "1.0.0"
    pullPolicy: IfNotPresent

  job:
    backoffLimit: 3
    restartPolicy: Never

  env:
    systemName: "TestSystemWithStorage"
    secretsMountPoint: "/var/secrets"

  volumes:
    secrets:
      sources:
        - secretName: cleo-license
        - secretName: cleo-license-verification-code
        - secretName: cleo-default-admin-password
        - secretName: cleo-system-settings
        - secretName: cleo-config-repo
        - secretName: cleo-runtime-repo
        - secretName: cleo-log-system
          optional: true

# Enable persistent storage
persistence:
  enabled: true
  claimName: "harmony-pvc"
  mountPath: "/shared-config"
